!function($,e,a){Common.Page=this;var t;this.setupOnce=function(){function e(){return _v=10*(Math.floor(9*Math.random())+1)+50,_v}Common.trace("Page -> setupOnce"),Common.setLoadedInit(!1),Common.ResizeEvent.setResizeSize(),Common.$body.css({overflow:"visible"}),TweenMax.to(Common.$blind,.4,{delay:.5,opacity:0,ease:"easeOutQuart",display:"none"});var a=$(".container").attr("id");if(t=a.substr(0,a.length-5),Common.trace("PAGE ID -> "+t),"news"==t?news.init():"story"==t?story.init():"cast-staff"==t?caststaff.init():"character"==t?character.init():"music"==t?music.init():"onair"==t?onair.init():"movie"==t&&movie.init(),Common.setParallax(),"character"!=t||!$(".detail__block").attr("id")){var n=-e(),o=-e(),i=-e();return n=-80,o=-130,i=-60,TweenMax.fromTo(".background__1 img",1.2,{y:n},{delay:.5,y:0,ease:"easeOutQuint"}),TweenMax.fromTo(".background__2 img",1.2,{y:o},{delay:.5,y:0,ease:"easeOutQuint"}),void TweenMax.fromTo(".background__3 img",1.2,{y:i},{delay:.5,y:0,ease:"easeOutQuint"});Common.$header.addClass("is--hidden"),TweenMax.fromTo("#header .header__inner",.8,{x:240},{delay:.5,x:0,ease:"easeOutQuint",onComplete:function(){Common.$header.removeClass("is--hidden")}})}},this.news={DEF_NUM:13,NEWS_ARY:null,LOAD_NUM:5,CLICK_NUM:0,ALL_LIST_NUM:0,LOAD_START_NUM:0,LOAD_END_NUM:0,init:function(){if(Common.trace("Page -> news -> init"),$("#lists").length>0){Common.trace("Page -> news -> list");var e=$("#listsDetails li").length;Common.trace("TOTAL: "+e+" / DEF: "+news.DEF_NUM),news.DEF_NUM>e?$("#lists .lists__more").addClass("is--none"):news.loadMoreNews(),$(".lists__more a").on("click",function(e){e.preventDefault(),news.setMoreNews()})}else $("#detail").length>0&&Common.trace("Page -> news -> detail")},loadMoreNews:function(){Common.trace("Page -> news -> loadMoreNews()"),$.ajax("/news-all/",{timeout:3e3,datatype:"html"}).then(function(e){Common.trace("update file load success");var a=$($.parseHTML(e)),t=a.filter("#moreNews")[0].innerHTML,n=$(t);news.ALL_LIST_NUM=n.find("li").length,Common.trace(news.ALL_LIST_NUM),news.NEWS_ARY=[];for(var o=1;o<=news.ALL_LIST_NUM;o++){var i=n.find("li:nth-child("+[o]+")");i.addClass("l"+o),news.NEWS_ARY.push(i)}console.dir(news.NEWS_ARY)},function(e,a){Common.trace("update file load false")})},setMoreNews:function(){if(Common.trace("Page -> news -> setMoreNews()"),!(news.LOAD_END_NUM>=news.ALL_LIST_NUM)){news.LOAD_START_NUM=news.DEF_NUM+news.CLICK_NUM*news.LOAD_NUM+1,news.CLICK_NUM++,news.LOAD_END_NUM=news.DEF_NUM+news.CLICK_NUM*news.LOAD_NUM,Common.trace("START: "+news.LOAD_START_NUM+" / END: "+news.LOAD_END_NUM);for(var e=news.LOAD_START_NUM-1;e<news.LOAD_END_NUM;e++){$("#listsDetails ul").append(news.NEWS_ARY[e]);var a=$("#listsDetails").find(".l"+(e+1));TweenMax.fromTo(a,1,{opacity:0},{opacity:1,ease:"easeOutQuart"}),console.dir(a)}news.LOAD_END_NUM>=news.ALL_LIST_NUM&&$("#lists .lists__more").addClass("is--none")}}},this.story={init:function(){Common.trace("Page -> story -> init"),$("#introduction").length>0&&TweenMax.to("#introductionImg span",.6,{delay:.8,scaleX:0,ease:"easeInOutCirc"}),Common.ScrollEvent.setParallaxObjects()}},this.caststaff={init:function(){Common.trace("Page -> caststaff -> init"),"pc"==Common.LAYOUT_MODE?Common.setMatchHeight("#staffBlock li",2):Common.setMatchHeight("#castBlock li",3),Common.ScrollEvent.setParallaxObjects()}},this.character={init:function(){Common.trace("Page -> character -> init"),$(".diagram__btn--open a").on("click",function(e){e.preventDefault(),$(this).parent("p").removeClass("is--show"),$(".diagram__btn--close").addClass("is--show"),$("#diagram").addClass("is--show"),TweenMax.fromTo("#diagram .diagram__inner",.6,{scaleX:0},{scaleX:1,ease:"easeInOutCirc"}),TweenMax.fromTo("#diagram .diagram__graph",.4,{opacity:0,y:30},{delay:.6,y:0,opacity:1,ease:"easeOutQuart"}),"pc"==Common.LAYOUT_MODE?TweenMax.to("#header",.6,{x:270,ease:"easeInOutCirc"}):TweenMax.to("#header",.6,{y:-270,ease:"easeInOutCirc"})}),$(".diagram__btn--close a").on("click",function(e){e.preventDefault(),$(this).parent("p").removeClass("is--show"),$(".diagram__btn--open").addClass("is--show"),TweenMax.to("#diagram .diagram__graph",.3,{y:30,opacity:0,ease:"easeOutQuart"}),TweenMax.to("#diagram .diagram__inner",.5,{delay:.3,scaleX:0,ease:"easeInOutCirc",onComplete:function(){$("#diagram").removeClass("is--show")}}),"pc"==Common.LAYOUT_MODE?TweenMax.to("#header",.5,{delay:.3,x:0,ease:"easeInOutCirc"}):TweenMax.to("#header",.5,{delay:.3,y:0,ease:"easeInOutCirc"})});var e=$("#detail .detail__block").attr("id");"character--12"==e||"character--13"==e||"character--21"==e||"character--22"==e?(TweenMax.fromTo("#detail .detail__profile",1,{opacity:0,x:50},{delay:.8,opacity:1,x:0,ease:"easeOutQuart"}),TweenMax.fromTo("#detail .detail__eyecatch",1,{opacity:0,x:-50},{delay:.8,opacity:1,x:0,ease:"easeOutQuart"})):(TweenMax.fromTo("#detail .detail__eyecatch__visual",1.2,{opacity:0,x:100},{delay:.8,opacity:1,x:0,ease:"easeOutQuart"}),TweenMax.fromTo("#detail .detail__eyecatch__visual span",1,{y:50},{delay:.8,y:0,ease:"easeInOutCubic"}),TweenMax.fromTo("#detail .detail__eyecatch__name",1,{opacity:0,y:80},{delay:1.2,opacity:1,y:0,ease:"easeOutQuart"}),TweenMax.fromTo("#detail .detail__eyecatch__words",1,{opacity:0,y:50},{delay:1.2,opacity:1,y:0,ease:"easeOutQuart"}),TweenMax.fromTo("#detail .detail__profile",1,{opacity:0,x:-50},{delay:1.8,opacity:1,x:0,ease:"easeOutQuart"}))}},this.music={init:function(){function e(){o=!!buzz.isSupported,Common.trace("sound bool: "+o),!o}function a(e,a){i&&t();var n=new buzz.sound(e,{formats:["mp3"],preload:!0,loop:!1,volume:a});r=n,r.setVolume(20),r.play(),i=!0,Common.trace("sound: play"),r.bind("play",function(){}),r.bind("ended",function(){Common.trace("sound: end"),t()})}function t(){Common.trace("sound: stop"),r.pause(),r.stop(),i=!1,$(".btn--play").removeClass("is--play"),$(".btn--play span").html("PLAY")}function n(e){var a=e.attr("data-soundurl");l=a}Common.trace("Page -> music -> init");var o=!1,i=!1,s=!1,r,c,l="",m=!0;m&&(e(),m=!1),$(".btn--play a").on("click",function(e){if(e.preventDefault(),o){if($(this).parent("li").hasClass("is--play"))return void t();n($(this)),a(l,20),$(this).parent("li").addClass("is--play"),$(this).find("span").html("STOP")}})}},this.onair={init:function(){Common.trace("Page -> onair -> init"),"pc"==Common.LAYOUT_MODE&&Common.setMatchHeight("#streaming dl",2)}},this.movie={init:function(){Common.trace("Page -> movie -> init")}}}(jQuery,window);